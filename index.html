<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline' 'unsafe-eval'; img-src 'self' data: https:;">
    <title>ðŸŽ¸ Akort Aleti</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-align: center;
        }
        .container {
            background: rgba(255,255,255,0.1);
            padding: 30px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
        button {
            background: #ff6b6b;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            border-radius: 25px;
            cursor: pointer;
            margin: 10px;
        }
        button:hover {
            background: #ff5252;
            transform: scale(1.05);
        }
        .instrument-buttons {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
        }
        .instrument-btn {
            background: rgba(255,255,255,0.2);
            border: 2px solid rgba(255,255,255,0.3);
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .instrument-btn.active {
            background: #ff6b6b;
            border-color: #ff5252;
            transform: scale(1.1);
        }
        .tuning-display {
            font-size: 20px;
            margin: 15px 0;
            padding: 10px;
            background: rgba(0,0,0,0.2);
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸŽ¸ AKORT ALETÄ°</h1>
        <p>EnstrÃ¼manÄ±nÄ± seÃ§ ve akort et!</p>
        
        <!-- ENSTRÃœMAN SEÃ‡Ä°MÄ° -->
        <div class="instrument-buttons">
            <div class="instrument-btn active" onclick="selectInstrument('guitar')">ðŸŽ¸ Gitar</div>
            <div class="instrument-btn" onclick="selectInstrument('piano')">ðŸŽ¹ Piyano</div>
            <div class="instrument-btn" onclick="selectInstrument('violin')">ðŸŽ» Keman</div>
            <div class="instrument-btn" onclick="selectInstrument('saz')">ðŸŽµ BaÄŸlama</div>
            <div class="instrument-btn" onclick="selectInstrument('ukulele')">ðŸŽ¶ Ukulele</div>
        </div>
        
        <div id="status">Mikrofon eriÅŸimi bekleniyor...</div>
        <button onclick="startListening()">ðŸŽ¤ Mikrofonu BaÅŸlat</button>
        
        <!-- AKORT BÄ°LGÄ°SÄ° -->
        <div class="tuning-display">
            <div id="pitchDisplay">Ses Seviyesi: ---</div>
            <div id="noteDisplay">Tahmini Nota: ---</div>
            <div id="instrumentInfo">EnstrÃ¼man: ðŸŽ¸ Gitar</div>
            <div id="tuningInfo">Akort: E A D G B E</div>
        </div>

        <!-- ENSTRÃœMAN AÃ‡IKLAMALARI -->
        <div id="instrumentDetails" style="margin-top: 20px; text-align: left; background: rgba(0,0,0,0.2); padding: 15px; border-radius: 10px;">
            <h3>ðŸŽ¯ Gitar Akort Bilgisi:</h3>
            <p><strong>KalÄ±ndan inceye:</strong> E (6) - A (5) - D (4) - G (3) - B (2) - E (1)</p>
            <p><strong>Frekanslar:</strong> E2 (82.41Hz) - A2 (110Hz) - D3 (146.83Hz) - G3 (196Hz) - B3 (246.94Hz) - E4 (329.63Hz)</p>
        </div>
    </div>

    <script>
        let audioContext;
        let analyser;
        let microphone;
        let javascriptNode;
        let currentInstrument = 'guitar';
        
        // EnstrÃ¼man bilgileri
        const instrumentData = {
            guitar: {
                name: "ðŸŽ¸ Gitar",
                tuning: "E A D G B E",
                details: "KalÄ±ndan inceye: E (6) - A (5) - D (4) - G (3) - B (2) - E (1)"
            },
            piano: {
                name: "ðŸŽ¹ Piyano", 
                tuning: "A4 = 440Hz (La)",
                details: "Standart akort: A4 notasÄ±nÄ±n frekansÄ± 440 Hz"
            },
            violin: {
                name: "ðŸŽ» Keman",
                tuning: "G D A E",
                details: "KalÄ±ndan inceye: G (4) - D (3) - A (2) - E (1)"
            },
            saz: {
                name: "ðŸŽµ BaÄŸlama",
                tuning: "La Re Sol",
                details: "Alt tel: La (A), Orta tel: Re (D), Ãœst tel: Sol (G)"
            },
            ukulele: {
                name: "ðŸŽ¶ Ukulele", 
                tuning: "G C E A",
                details: "KalÄ±ndan inceye: G (4) - C (3) - E (2) - A (1)"
            }
        };
        
        function selectInstrument(instrument) {
            currentInstrument = instrument;
            
            // ButonlarÄ± gÃ¼ncelle
            document.querySelectorAll('.instrument-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // EnstrÃ¼man bilgilerini gÃ¼ncelle
            const data = instrumentData[instrument];
            document.getElementById('instrumentInfo').textContent = `EnstrÃ¼man: ${data.name}`;
            document.getElementById('tuningInfo').textContent = `Akort: ${data.tuning}`;
            document.getElementById('instrumentDetails').innerHTML = `
                <h3>ðŸŽ¯ ${data.name} Akort Bilgisi:</h3>
                <p><strong>${data.details}</strong></p>
            `;
        }
        
        function startListening() {
            navigator.mediaDevices.getUserMedia({ audio: true })
                .then(function(stream) {
                    document.getElementById('status').textContent = 'Mikrofon baÄŸlandÄ±! ðŸŽ¤';
                    
                    audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    analyser = audioContext.createAnalyser();
                    microphone = audioContext.createMediaStreamSource(stream);
                    
                    microphone.connect(analyser);
                    analyser.fftSize = 2048;
                    
                    javascriptNode = audioContext.createScriptProcessor(2048, 1, 1);
                    analyser.connect(javascriptNode);
                    javascriptNode.connect(audioContext.destination);
                    
                    javascriptNode.onaudioprocess = function() {
                        const array = new Uint8Array(analyser.frequencyBinCount);
                        analyser.getByteFrequencyData(array);
                        
                        let values = 0;
                        for (let i = 0; i < array.length; i++) {
                            values += array[i];
                        }
                        
                        const average = values / array.length;
                        const pitch = Math.round(average);
                        
                        document.getElementById('pitchDisplay').textContent = `Ses Seviyesi: ${pitch}`;
                        
                        // EnstrÃ¼mana gÃ¶re nota tespiti
                        const notes = getNotesForInstrument(currentInstrument);
                        const noteIndex = Math.min(Math.floor(pitch / 15), notes.length - 1);
                        document.getElementById('noteDisplay').textContent = `Tahmini Nota: ${notes[noteIndex]}`;
                    };
                })
                .catch(function(err) {
                    document.getElementById('status').textContent = 'Mikrofon hatasÄ±: ' + err.message;
                });
        }
        
        function getNotesForInstrument(instrument) {
            const noteMap = {
                guitar: ['E2', 'A2', 'D3', 'G3', 'B3', 'E4', 'YÃ¼ksek'],
                piano: ['C', 'D', 'E', 'F', 'G', 'A', 'B', 'YÃ¼ksek'],
                violin: ['G3', 'D4', 'A4', 'E5', 'YÃ¼ksek'],
                saz: ['La', 'Re', 'Sol', 'YÃ¼ksek'],
                ukulele: ['G', 'C', 'E', 'A', 'YÃ¼ksek']
            };
            return noteMap[instrument] || noteMap.guitar;
        }
        
        window.onload = function() {
            document.getElementById('status').textContent = 'ðŸŽ¸ Akort aleti hazÄ±r! EnstrÃ¼man seÃ§ ve mikrofonu baÅŸlat.';
        }
    </script>
</body>
</html>







